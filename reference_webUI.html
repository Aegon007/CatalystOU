<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynergyScout</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Tippy.js CDN -->
    <link href="https://unpkg.com/tippy.js@6.3.7/dist/tippy.css" rel="stylesheet">
    <script src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.7/dist/tippy-bundle.umd.min.js"></script>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Main Container -->
    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        <!-- Input Page -->
        <div id="input-page" class="w-full max-w-3xl bg-white rounded-lg shadow-lg p-6">
            <!-- Header -->
            <div class="text-center mb-6">
                <h1 class="text-3xl font-bold text-blue-600">SynergyScout</h1>
                <p class="text-gray-600">Discover Research Collaboration Potential</p>
            </div>
            <!-- Input Form -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <!-- Scholar A Input -->
                <div>
                    <label class="block text-sm font-medium text-gray-700">Scholar A</label>
                    <input id="scholar-a" type="text" placeholder="Enter arXiv ID or paper URLs" class="mt-1 w-full p-2 border rounded-md focus:ring-blue-500 focus:border-blue-500">
                </div>
                <!-- Scholar B Input -->
                <div>
                    <label class="block text-sm font-medium text-gray-700">Scholar B</label>
                    <input id="scholar-b" type="text" placeholder="Enter arXiv ID or paper URLs" class="mt-1 w-full p-2 border rounded-md focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>
            <!-- Action Buttons -->
            <div class="flex justify-center gap-4">
                <button id="example-btn" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600">Fill Example</button>
                <button id="analyze-btn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center">
                    <span>Analyze Potential</span>
                    <svg id="loading-spinner" class="hidden animate-spin ml-2 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Results Page (Hidden Initially) -->
        <div id="results-page" class="hidden w-full max-w-4xl bg-white rounded-lg shadow-lg p-6 mt-4">
            <!-- Header -->
            <div class="text-center mb-6">
                <h1 class="text-2xl font-bold text-blue-600">Collaboration Potential Report</h1>
            </div>
            <!-- A. Top-Level Summary -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Summary</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Potential Index -->
                    <div class="text-center">
                        <div class="text-4xl font-bold text-blue-600" data-tippy-content="Score based on domain similarity, method complementarity, and resource synergy">82/100</div>
                        <p class="text-gray-600">Collaboration Potential Index</p>
                    </div>
                    <!-- Radar Chart -->
                    <div>
                        <canvas id="radar-chart" class="w-full h-64"></canvas>
                    </div>
                </div>
                <!-- One-Sentence Summary -->
                <p id="summary-sentence" class="mt-4 text-center text-gray-700 italic"></p>
            </div>
            <!-- B. Core Insights -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Core Insights</h2>
                <div id="insights-container" class="space-y-4"></div>
            </div>
            <!-- C. Detailed Evidence -->
            <div>
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Detailed Evidence</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Scholar A Profile -->
                    <div id="scholar-a-profile" class="border rounded-md p-4">
                        <h3 class="text-lg font-medium text-gray-700 mb-2">Scholar A</h3>
                        <div class="space-y-2"></div>
                    </div>
                    <!-- Scholar B Profile -->
                    <div id="scholar-b-profile" class="border rounded-md p-4">
                        <h3 class="text-lg font-medium text-gray-700 mb-2">Scholar B</h3>
                        <div class="space-y-2"></div>
                    </div>
                </div>
            </div>
            <!-- Export Button -->
            <div class="flex justify-end mt-6">
                <button id="export-btn" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">Export as PDF</button>
            </div>
        </div>
    </div>

    <script>
        // Mock data for results (simulating backend output)
        const mockResults = {
            potentialIndex: 82,
            summarySentence: "Scholars A and B are highly complementary in methods and problem domains, ideal for theoretical-practical collaboration.",
            radarData: {
                labels: ["Domain Similarity", "Method Complementarity", "Technical Commonality", "Resource Synergy"],
                values: [85, 80, 75, 88]
            },
            insights: [
                {
                    title: "Method Complementarity",
                    icon: "ðŸ’¡",
                    text: "Scholar A's expertise in <strong>reinforcement learning</strong> complements Scholar B's focus on <strong>natural language processing</strong>, enabling innovative cross-domain solutions."
                },
                {
                    title: "Problem Domain Synergy",
                    icon: "âœ…",
                    text: "Both scholars address <strong>AI ethics</strong>, providing a shared foundation for impactful collaboration."
                }
            ],
            profiles: {
                scholarA: {
                    name: "Dr. Alice Smith",
                    areas: ["Reinforcement Learning", "AI Ethics"],
                    methods: ["Q-Learning", "Deep RL"],
                    keywords: ["RL", "Ethics", "Optimization"]
                },
                scholarB: {
                    name: "Dr. Bob Johnson",
                    areas: ["Natural Language Processing", "AI Ethics"],
                    methods: ["Transformers", "Sentiment Analysis"],
                    keywords: ["NLP", "Ethics", "Text Analysis"]
                }
            }
        };

        // DOM Elements
        const inputPage = document.getElementById("input-page");
        const resultsPage = document.getElementById("results-page");
        const analyzeBtn = document.getElementById("analyze-btn");
        const exampleBtn = document.getElementById("example-btn");
        const scholarAInput = document.getElementById("scholar-a");
        const scholarBInput = document.getElementById("scholar-b");
        const loadingSpinner = document.getElementById("loading-spinner");
        const summarySentence = document.getElementById("summary-sentence");
        const insightsContainer = document.getElementById("insights-container");
        const scholarAProfile = document.getElementById("scholar-a-profile").querySelector("div");
        const scholarBProfile = document.getElementById("scholar-b-profile").querySelector("div");
        const exportBtn = document.getElementById("export-btn");

        // Initialize Tippy.js tooltips
        tippy("[data-tippy-content]", { theme: "light" });

        // Radar Chart Setup
        const radarChart = new Chart(document.getElementById("radar-chart"), {
            type: "radar",
            data: {
                labels: mockResults.radarData.labels,
                datasets: [{
                    label: "Collaboration Dimensions",
                    data: mockResults.radarData.values,
                    backgroundColor: "rgba(59, 130, 246, 0.2)",
                    borderColor: "rgba(59, 130, 246, 1)",
                    borderWidth: 2
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });

        // Example Button: Fill inputs with sample data
        exampleBtn.addEventListener("click", () => {
            scholarAInput.value = "arXiv:1234.5678";
            scholarBInput.value = "arXiv:9012.3456";
        });

        // Analyze Button: Simulate analysis and show results
        analyzeBtn.addEventListener("click", () => {
            if (!scholarAInput.value || !scholarBInput.value) {
                alert("Please enter data for both scholars.");
                return;
            }
            // Show loading state
            analyzeBtn.disabled = true;
            loadingSpinner.classList.remove("hidden");
            setTimeout(() => {
                // Hide input page, show results page
                inputPage.classList.add("hidden");
                resultsPage.classList.remove("hidden");
                // Populate results
                summarySentence.textContent = mockResults.summarySentence;
                // Populate insights
                mockResults.insights.forEach(insight => {
                    const card = document.createElement("div");
                    card.className = "bg-gray-50 p-4 rounded-md shadow-sm";
                    card.innerHTML = `
                        <h3 class="text-lg font-medium text-gray-800 flex items-center">
                            <span class="mr-2">${insight.icon}</span> ${insight.title}
                        </h3>
                        <p class="text-gray-600">${insight.text}</p>
                    `;
                    insightsContainer.appendChild(card);
                });
                // Populate profiles
                const populateProfile = (profile, container) => {
                    const areas = document.createElement("div");
                    areas.innerHTML = `<p><strong>Areas:</strong> ${profile.areas.join(", ")}</p>`;
                    const methods = document.createElement("div");
                    methods.innerHTML = `<p><strong>Methods:</strong> ${profile.methods.join(", ")}</p>`;
                    const keywords = document.createElement("div");
                    keywords.className = "collapsible";
                    keywords.innerHTML = `
                        <button class="w-full text-left text-blue-600 hover:underline">Show Keywords</button>
                        <div class="hidden mt-2"><p><strong>Keywords:</strong> ${profile.keywords.join(", ")}</p></div>
                    `;
                    container.append(areas, methods, keywords);
                };
                populateProfile(mockResults.profiles.scholarA, scholarAProfile);
                populateProfile(mockResults.profiles.scholarB, scholarBProfile);
                // Add collapsible panel toggle
                document.querySelectorAll(".collapsible button").forEach(btn => {
                    btn.addEventListener("click", () => {
                        const content = btn.nextElementSibling;
                        content.classList.toggle("hidden");
                        btn.textContent = content.classList.contains("hidden") ? "Show Keywords" : "Hide Keywords";
                    });
                });
                // Hide loading state
                analyzeBtn.disabled = false;
                loadingSpinner.classList.add("hidden");
            }, 1000); // Simulate 1s processing delay
        });

        // Export Button: Placeholder for PDF export
        exportBtn.addEventListener("click", () => {
            alert("PDF export functionality would be implemented here.");
        });
    </script>
</body>
</html>